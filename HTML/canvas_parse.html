<style>
  canvas {
    border: 1px solid #000000;
  }
</style>

<canvas id="canvas" width=300 height=300></canvas>
<canvas id="output" width=300 height=300></canvas>

<script>
  var image = new Image();
  image.crossOrigin = "Anonymous";
  image.src = "./images/2A3g2.jpg";
  image.onload = imageLoaded;

  var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext("2d");

  var output = document.getElementById("output");
  var outctx = output.getContext("2d");

  function FilterInvert(p) {
    // Filter out any black white noise + Invert 
    for (var x = 0; x < p.data.length; x += 4) {
      if (p.data[x] > 127) {
        p.data[x] = 0;
        p.data[x + 1] = 0;
        p.data[x + 2] = 0;
      } else if (p.data[x] <= 127) {
        p.data[x] = 255;
        p.data[x + 1] = 255;
        p.data[x + 2] = 255;
      }
    }
    return p
  }

  function imageLoaded() {
    ctx.drawImage(image, 0, 0, 300, 300);
    var pixeldata = ctx.getImageData(0, 0, 300, 300);
    var data = FilterInvert(pixeldata)
    outctx.putImageData(data, 0, 0);
  }
</script>